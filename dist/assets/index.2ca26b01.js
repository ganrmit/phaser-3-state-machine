import{P as t}from"./vendor.21f5455c.js";!function(t=".",s="__import__"){try{self[s]=new Function("u","return import(u)")}catch(e){const i=new URL(t,location),r=t=>{URL.revokeObjectURL(t.src),t.remove()};self[s]=t=>new Promise(((e,o)=>{const n=new URL(t,i);if(self[s].moduleMap[n])return e(self[s].moduleMap[n]);const a=new Blob([`import * as m from '${n}';`,`${s}.moduleMap['${n}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){o(new Error(`Failed to import: ${t}`)),r(l)},onload(){e(self[s].moduleMap[n]),r(l)}});document.head.appendChild(l)})),self[s].moduleMap={}}}("assets/");var s={type:t.AUTO,parent:"game",backgroundColor:"#33A5E7",physics:{default:"arcade",arcade:{gravity:{y:300}}},render:{pixelArt:!0},scale:{width:300,height:200,mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH}};class e{constructor(t){this.cursors=t.input.keyboard.createCursorKeys()}get stickX(){return(this.left.isDown?-1:0)+(this.right.isDown?1:0)}get left(){return this.cursors.left}get right(){return this.cursors.right}get down(){return this.cursors.down}get jump(){return this.cursors.up}}class i extends Phaser.Physics.Arcade.Sprite{constructor(t,s,i){super(t,s,i,"adventurer"),this.baseRunSpeed=160,this.baseJumpHeight=250,t.add.existing(this),t.physics.add.existing(this),this.setCollideWorldBounds(),this.setSize(12,36),this.setGravityY(300),this.controls=new e(t),this.pState=new o(this,this.controls),window.player=this}static preload(t){t.load.atlas("adventurer","assets/adventurer/adventurer.png","assets/adventurer/adventurer_atlas.json"),t.load.animation("adventurer_anim","assets/adventurer/adventurer_anim.json")}update(t,s){let e=this.pState.update();e&&(this.pState=e)}}class r{constructor(t,s){this.player=t,this.controls=s}transition(t){return console.log(t.name),new t(this.player,this.controls)}lookDirection(){this.controls.left.isDown?this.player.setFlipX(!0):this.controls.right.isDown&&this.player.setFlipX(!1)}moveX(){this.player.setVelocityX(this.player.baseRunSpeed*this.controls.stickX)}}class o extends r{constructor(t,s){super(t,s),t.anims.play("idle")}update(){return this.lookDirection(),this.moveX(),Phaser.Input.Keyboard.JustDown(this.controls.jump)&&this.player.body.touching.down?this.transition(l):0!==this.controls.stickX?this.transition(n):this.controls.down.isDown?this.transition(a):void 0}}class n extends r{constructor(t,s){super(t,s),t.anims.play("run")}update(){return this.lookDirection(),this.moveX(),this.controls.down.isDown?this.transition(h):Phaser.Input.Keyboard.JustDown(this.controls.jump)&&this.player.body.touching.down?this.transition(l):0===this.controls.stickX?this.transition(o):void 0}}class a extends r{constructor(t,s){super(t,s),t.anims.play("crouch")}update(){return this.lookDirection(),this.moveX(),this.controls.down.isDown?0!==this.controls.stickX?this.transition(h):void 0:this.transition(o)}}class l extends r{constructor(t,s){super(t,s),t.setVelocityY(-this.player.baseJumpHeight),t.anims.play("jump")}update(){return this.lookDirection(),this.moveX(),Phaser.Input.Keyboard.JustDown(this.controls.jump)?this.transition(c):this.player.body.touching.down?this.transition(o):this.player.body.touching.left||this.player.body.touching.right?this.transition(u):void 0}}class c extends r{constructor(t,s){super(t,s),t.setVelocityY(-this.player.baseJumpHeight),t.anims.play("smrslt")}update(){return this.lookDirection(),this.moveX(),this.player.body.touching.down?this.transition(o):this.player.body.touching.left||this.player.body.touching.right?this.transition(u):void 0}}class h extends r{constructor(t,s){super(t,s),t.anims.play("slide")}update(){if(this.player.body.velocity.x*=.97,Math.abs(this.player.body.velocity.x)<10&&(this.player.body.velocity.x=0),!this.controls.down.isDown)return this.transition(d)}}class d extends r{constructor(t,s){super(t,s),t.anims.play("stand")}update(){if(!this.player.anims.isPlaying)return this.transition(o)}}class u extends r{constructor(t,s){super(t,s),t.anims.play("wall-slide"),t.setGravityY(-100)}update(){if(this.player.body.touching.down)return this.player.setGravityY(300),this.transition(o)}}class p extends t.Scene{constructor(){super("StateScene")}preload(){i.preload(this)}create(){let t=this.physics.add.staticGroup();t.add(this.add.rectangle(150,200,300,20,16711680)),t.add(this.add.rectangle(0,100,20,200,16711680)),t.add(this.add.rectangle(300,100,20,200,16711680)),this.player=new i(this,100,100),this.physics.add.collider(this.player,t)}update(t,s){this.player.update(t,s)}}new t.Game(Object.assign(s,{scene:[p]}));
