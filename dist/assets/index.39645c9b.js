import{P as t}from"./vendor.21f5455c.js";!function(t=".",s="__import__"){try{self[s]=new Function("u","return import(u)")}catch(e){const i=new URL(t,location),o=t=>{URL.revokeObjectURL(t.src),t.remove()};self[s]=t=>new Promise(((e,r)=>{const a=new URL(t,i);if(self[s].moduleMap[a])return e(self[s].moduleMap[a]);const n=new Blob([`import * as m from '${a}';`,`${s}.moduleMap['${a}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){r(new Error(`Failed to import: ${t}`)),o(l)},onload(){e(self[s].moduleMap[a]),o(l)}});document.head.appendChild(l)})),self[s].moduleMap={}}}("assets/");var s={type:t.AUTO,parent:"game",backgroundColor:"#33A5E7",physics:{default:"arcade",arcade:{gravity:{y:300}}},render:{pixelArt:!0},scale:{width:300,height:200,mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH}};class e{constructor(t){this.cursors=t.input.keyboard.createCursorKeys()}get stickX(){return(this.left.isDown?-1:0)+(this.right.isDown?1:0)}get left(){return this.cursors.left}get right(){return this.cursors.right}get down(){return this.cursors.down}get jump(){return this.cursors.up}}class i{constructor(){this.startTime=Date.now()}elapsedMs(){return Date.now()-this.startTime}}class o extends Phaser.Physics.Arcade.Sprite{constructor(t,s,i){super(t,s,i,"adventurer"),this.baseRunSpeed=160,this.baseJumpVelocity=250,t.add.existing(this),t.physics.add.existing(this),this.setCollideWorldBounds(),this.setSize(12,30),this.setGravityY(300),this.setDepth(100),this.controls=new e(t),this.currentState=new a(this,this.controls),this.lastState=this.currentState,window.player=this}static preload(t){t.load.atlas("adventurer","assets/adventurer/adventurer.png","assets/adventurer/adventurer_atlas.json"),t.load.animation("adventurer_anim","assets/adventurer/adventurer_anim.json")}update(t,s){let e=this.currentState.update();e&&(this.lastState=this.currentState,this.currentState=e)}}class r{constructor(t,s){this.player=t,this.controls=s}transition(t){return console.log(t.name),new t(this.player,this.controls)}lookDirection(){this.controls.left.isDown?this.player.setFlipX(!0):this.controls.right.isDown&&this.player.setFlipX(!1)}moveX(){this.player.setVelocityX(this.player.baseRunSpeed*this.controls.stickX)}}class a extends r{constructor(t,s){super(t,s),t.anims.play("idle")}update(){return this.lookDirection(),this.moveX(),Phaser.Input.Keyboard.JustDown(this.controls.jump)&&this.player.body.touching.down?this.transition(h):0!==this.controls.stickX?this.transition(n):this.controls.down.isDown?this.transition(l):void 0}}class n extends r{constructor(t,s){super(t,s),t.anims.play("run"),this.stopWatch=new i}update(){return this.lookDirection(),this.moveX(),this.controls.down.isDown?this.transition(d):Phaser.Input.Keyboard.JustDown(this.controls.jump)&&this.player.body.touching.down?this.transition(h):0===this.controls.stickX?this.transition(a):void 0}}class l extends r{constructor(t,s){super(t,s),t.anims.play("crouch")}update(){return this.lookDirection(),this.moveX(),this.controls.down.isDown?0!==this.controls.stickX?this.transition(d):void 0:this.transition(a)}}class h extends r{constructor(t,s){super(t,s),t.setVelocityY(-this.player.baseJumpVelocity),t.anims.play("jump")}update(){return this.lookDirection(),this.moveX(),!this.player.anims.isPlaying&&this.player.body.velocity.y>0&&this.player.anims.play("fall"),Phaser.Input.Keyboard.JustUp(this.controls.jump)&&this.player.body.velocity.y<-100&&(this.player.body.velocity.y=-100),Phaser.Input.Keyboard.JustDown(this.controls.jump)?this.transition(c):this.player.body.touching.down?this.transition(a):this.player.body.onWall()?this.transition(p):void 0}}class c extends r{constructor(t,s){super(t,s),t.setVelocityY(-this.player.baseJumpVelocity),t.anims.play("smrslt")}update(){return this.lookDirection(),this.moveX(),this.player.body.touching.down?this.transition(a):this.player.body.onWall()?this.transition(p):void 0}}class d extends r{constructor(t,s){super(t,s),t.anims.play("slide")}update(){if(this.player.body.velocity.x*=.97,Math.abs(this.player.body.velocity.x)<10&&(this.player.body.velocity.x=0,this.player.anims.play("thumbs-up")),!this.controls.down.isDown)return this.transition(u)}}class u extends r{constructor(t,s){super(t,s),t.anims.play("stand")}update(){if(!this.player.anims.isPlaying)return this.transition(a)}}class p extends r{constructor(t,s){super(t,s),t.anims.play("wall-slide"),this.wallLeft=this.player.body.touching.left}update(){return this.player.body.touching.down?this.transition(a):((0===this.controls.stickX||(this.wallLeft?this.controls.stickX<0:this.controls.stickX>0))&&this.player.setVelocityX(this.wallLeft?-10:10),this.player.body.touching.none?this.transition(y):void 0)}}class y extends r{constructor(t,s){super(t,s),t.anims.play("fall")}update(){if(this.lookDirection(),this.moveX(),this.player.body.touching.down)return this.transition(a)}}class m extends t.Scene{constructor(){super("StateScene")}preload(){o.preload(this)}create(){this.physics.world.setBoundsCollision(!0,!0,!1,!0),this.player=new o(this,100,100),this.createPlatforms()}update(t,s){this.player.update(t,s),this.movingPlatform.x>=200?this.movingPlatform.setVelocityX(-50):this.movingPlatform.x<=50&&this.movingPlatform.setVelocityX(50)}createPlatforms(){let t=this.physics.add.staticGroup();t.add(this.add.rectangle(150,200,300,20,16711680).setData("slideable",!0)),t.add(this.add.rectangle(300,100,20,200,16711680).setData("slideable",!0)),t.add(this.add.rectangle(0,100,20,200,16711680)),this.physics.add.collider(this.player,t),this.movingPlatform=this.physics.add.existing(this.add.rectangle(250,120,50,7,65280)).body,this.movingPlatform.setVelocityX(-50),this.movingPlatform.setImmovable(!0),this.movingPlatform.allowGravity=!1,this.physics.add.collider(this.player,this.movingPlatform.gameObject)}}new t.Game(Object.assign(s,{scene:[m]}));
