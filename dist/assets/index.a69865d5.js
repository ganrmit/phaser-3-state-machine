import{P as t}from"./vendor.21f5455c.js";!function(t=".",s="__import__"){try{self[s]=new Function("u","return import(u)")}catch(e){const r=new URL(t,location),o=t=>{URL.revokeObjectURL(t.src),t.remove()};self[s]=t=>new Promise(((e,i)=>{const n=new URL(t,r);if(self[s].moduleMap[n])return e(self[s].moduleMap[n]);const a=new Blob([`import * as m from '${n}';`,`${s}.moduleMap['${n}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){i(new Error(`Failed to import: ${t}`)),o(l)},onload(){e(self[s].moduleMap[n]),o(l)}});document.head.appendChild(l)})),self[s].moduleMap={}}}("assets/");var s={type:t.AUTO,parent:"game",backgroundColor:"#33A5E7",physics:{default:"arcade",arcade:{gravity:{y:300}}},render:{pixelArt:!0},scale:{width:300,height:200,mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH}};class e{constructor(t){this.cursors=t.input.keyboard.createCursorKeys()}get stickX(){return(this.left.isDown?-1:0)+(this.right.isDown?1:0)}get left(){return this.cursors.left}get right(){return this.cursors.right}get down(){return this.cursors.down}get jump(){return this.cursors.up}}class r extends Phaser.Physics.Arcade.Sprite{constructor(t,s,r){super(t,s,r,"adventurer"),this.baseRunSpeed=160,this.baseJumpHeight=250,t.add.existing(this),t.physics.add.existing(this),this.setCollideWorldBounds(),this.setSize(12,36),this.setGravityY(300),this.controls=new e(t),this.pState=new i(this,this.controls),window.player=this}static preload(t){t.load.atlas("adventurer","assets/adventurer/adventurer.png","assets/adventurer/adventurer_atlas.json"),t.load.animation("adventurer_anim","assets/adventurer/adventurer_anim.json")}update(t,s){let e=this.pState.update();e&&(this.pState=e)}}class o{constructor(t,s){this.player=t,this.controls=s}transition(t){return new t(this.player,this.controls)}lookDirection(){this.controls.left.isDown?this.player.setFlipX(!0):this.controls.right.isDown&&this.player.setFlipX(!1)}moveX(){this.player.setVelocityX(this.player.baseRunSpeed*this.controls.stickX)}}class i extends o{constructor(t,s){super(t,s),t.anims.play("idle")}update(){return this.lookDirection(),this.moveX(),Phaser.Input.Keyboard.JustDown(this.controls.jump)&&this.player.body.touching.down?this.transition(l):0!==this.controls.stickX?new n(this.player,this.controls):this.controls.down.isDown?new a(this.player,this.controls):void 0}}class n extends o{constructor(t,s){super(t,s),t.anims.play("run")}update(){return this.lookDirection(),this.moveX(),this.controls.down.isDown?new h(this.player,this.controls):Phaser.Input.Keyboard.JustDown(this.controls.jump)&&this.player.body.touching.down?new l(this.player,this.controls):0===this.controls.stickX?new i(this.player,this.controls):void 0}}class a extends o{constructor(t,s){super(t,s),t.anims.play("crouch")}update(){return this.lookDirection(),this.moveX(),this.controls.down.isDown?0!==this.controls.stickX?this.transition(h):void 0:new i(this.player,this.controls)}}class l extends o{constructor(t,s){super(t,s),t.setVelocityY(-this.player.baseJumpHeight),t.anims.play("jump")}update(){return this.lookDirection(),this.moveX(),Phaser.Input.Keyboard.JustDown(this.controls.jump)?new c(this.player,this.controls):this.player.body.touching.down?new i(this.player,this.controls):void 0}}class c extends o{constructor(t,s){super(t,s),t.setVelocityY(-this.player.baseJumpHeight),t.anims.play("smrslt")}update(){if(this.lookDirection(),this.moveX(),this.player.body.touching.down)return new i(this.player,this.controls)}}class h extends o{constructor(t,s){super(t,s),t.anims.play("slide")}update(){if(this.player.setVelocityX(.97*this.player.body.velocity.x),!this.controls.down.isDown)return new i(this.player,this.controls)}}class d extends t.Scene{constructor(){super("StateScene")}preload(){r.preload(this)}create(){let t=this.physics.add.staticGroup();t.add(this.add.rectangle(150,200,300,20,16711680)),t.add(this.add.rectangle(0,100,20,200,16711680)),this.player=new r(this,100,100),this.physics.add.collider(this.player,t)}update(t,s){this.player.update(t,s)}}new t.Game(Object.assign(s,{scene:[d]}));
